@use "sass:meta";
@use 'variables' as *;
@use 'functions' as *;

@function xyz-negative-val($val) {
  @return $val * -1;
}

@function xyz-one-minus-val($val) {
  @return 1 - $val;
}

@function xyz-one-plus-val($val) {
  @return 1 + $val;
}

@mixin xyz-utilities () {
  @include xyz-include-once('utilities') {

    // TIMINGS

    @include xyz-make-variable-utilities(
      $name: 'ease',
      $var: 'ease',
      $default-val: var(--xyz-ease-default),
      $utility-map: $xyz-utility-eases,
      $modes: append($xyz-modes-all, 'move'),
    );

    @include xyz-make-variable-utilities(
      $name: 'duration',
      $var: 'duration',
      $default-val: var(--xyz-duration-default),
      $utility-map: $xyz-utility-times,
      $modes: append($xyz-modes-all, 'move'),
    );

    @include xyz-make-variable-utilities(
      $name: 'delay',
      $var: 'delay',
      $default-val: var(--xyz-delay-default),
      $utility-map: $xyz-utility-times,
      $modes: append($xyz-modes-all, 'move'),
    );

    @include xyz-make-variable-utilities(
      $name: 'stagger',
      $var: 'stagger',
      $default-val: var(--xyz-stagger-default),
      $utility-map: $xyz-utility-times,
    );

    @include xyz-make-variable-utilities(
      $name: 'stagger-rev',
      $var: 'stagger-rev',
      $default-val: var(--xyz-stagger-default),
      $utility-map: $xyz-utility-times,
    );

    @include xyz-make-variable-utilities(
      $name: 'iterations',
      $var: 'iterations',
      $default-val: var(--xyz-iterations-default),
      $utility-map: $xyz-utility-iterations,
    );

    // FADES

    @include xyz-make-variable-utilities(
      $name: 'fade',
      $var: 'fade',
      $default-val: calc(1 - var(--xyz-fade-default)),
      $utility-map: $xyz-utility-fades,
      $transform-func: meta.get-function('xyz-one-minus-val'),
    );

    // TRANSLATIONS

    @include xyz-make-variable-utilities(
      $name: 'right',
      $var: 'translate-x',
      $default-val: var(--xyz-translate-default),
      $utility-map: $xyz-utility-translations,
    );

    @include xyz-make-variable-utilities(
      $name: 'left',
      $var: 'translate-x',
      $default-val: calc(var(--xyz-translate-default) * -1),
      $utility-map: $xyz-utility-translations,
      $transform-func: meta.get-function('xyz-negative-val'),
    );

    @include xyz-make-variable-utilities(
      $name: 'down',
      $var: 'translate-y',
      $default-val: var(--xyz-translate-default),
      $utility-map: $xyz-utility-translations,
    );

    @include xyz-make-variable-utilities(
      $name: 'up',
      $var: 'translate-y',
      $default-val: calc(var(--xyz-translate-default) * -1),
      $utility-map: $xyz-utility-translations,
      $transform-func: meta.get-function('xyz-negative-val'),
    );

    @include xyz-make-variable-utilities(
      $name: 'front',
      $var: 'translate-z',
      $default-val: var(--xyz-translate-default),
      $utility-map: $xyz-utility-translations,
    );

    @include xyz-make-variable-utilities(
      $name: 'back',
      $var: 'translate-z',
      $default-val: calc(var(--xyz-translate-default) * -1),
      $utility-map: $xyz-utility-translations,
      $transform-func: meta.get-function('xyz-negative-val'),
    );

    // ROTATIONS

    @include xyz-make-variable-utilities(
      $name: 'turn-cw',
      $var: 'rotate',
      $default-val: var(--xyz-rotate-default),
      $utility-map: $xyz-utility-rotations,
    );

    @include xyz-make-variable-utilities(
      $name: 'turn-ccw',
      $var: 'rotate',
      $default-val: calc(var(--xyz-rotate-default) * -1),
      $utility-map: $xyz-utility-rotations,
      $transform-func: meta.get-function('xyz-negative-val'),
    );

    // SCALES

    @include xyz-make-variable-utilities(
      $name: 'small',
      $var: 'scale',
      $default-val: calc(1 - var(--xyz-scale-default)),
      $utility-map: $xyz-utility-scales,
      $transform-func: meta.get-function('xyz-one-minus-val'),
    );

    @include xyz-make-variable-utilities(
      $name: 'big',
      $var: 'scale',
      $default-val: calc(1 + var(--xyz-scale-default)),
      $utility-map: $xyz-utility-scales,
      $transform-func: meta.get-function('xyz-one-plus-val'),
    );
  }
}
